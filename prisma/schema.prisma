generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  relationMode = "prisma"
}

enum Role {
  user
  assistant
}

model User {
  id           String  @id @default(cuid()) @map("id")
  clerkId      String  @unique
  email        String  @unique
  name         String?
  avatar       String?

  // User preferences and settings
  theme        String? @default("light") // light or dark mode
  lastLogin    DateTime?
  loginCount   Int     @default(0)
  
  // Relationships
  sessions     Session[]

  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Session {
  id           String   @id @default(cuid())
  userId       String
  device       String?  // Device information
  ipAddress    String?  // IP address
  userAgent    String?  // Browser information
  lastActive   DateTime @default(now())
  expiresAt    DateTime
  
  // Relationship to user
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([userId])
}
